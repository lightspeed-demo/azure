---
- name: Get list of all subscriptions
  register: az_all_subscriptions
  azure.azcollection.azure_rm_subscription_info:
    all: true

- name: Get a subscription by id
  azure.azcollection.azure_rm_subscription_info:
    id: "{{ az_all_subscriptions.subscriptions[0].subscription_id }}"

- name: Get a subscription by name
  azure.azcollection.azure_rm_subscription_info:
    name: "{{ az_all_subscriptions.subscriptions[0].display_name }}"

- name: Test invalid name id combo
  register: invalid_name
  ignore_errors: true
  azure.azcollection.azure_rm_subscription_info:
    name: "{{ az_all_subscriptions.subscriptions[0].display_name }}"
    id: "{{ az_all_subscriptions.subscriptions[0].subscription_id }}"

- name: Assert task failed
  ansible.builtin.assert:
    that:
      - invalid_name['failed'] == True
